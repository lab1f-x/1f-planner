<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>研究棟式 : 一日配分図</title>
  <style>
    /* ─────── 全体レイアウト ─────── */
    body {
  background: white;
  font-family: sans-serif;
  margin: 0; /* 余白ゼロ */
  height: 100vh; /* 画面いっぱい */
  display: flex;
  flex-direction: column;
  justify-content: flex-end; /* 下寄せ */
  align-items: center; /* 横中央 */
  padding: 0 10vw 10vh 10vw; /* 左右に10%ずつ、下に10%の余裕 */
  box-sizing: border-box; /* paddingを含めたサイズ調整 */
}
    /* 操作ボタン */
    .controls {
      margin-bottom: 10px;
    }
    .controls button {
      margin: 0 5px;
      padding: 6px 14px;
      font-size: 14px;
      cursor: pointer;
    }
    /* メモ＆カレンダーを横並び */
    .top-bar {
      display: flex;
      width: 100%;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    /* ─────── メモ欄 ─────── */
   #memo {
  width: 120px;
  height: 80px;
  border: 1px solid #ccc;
  background-color: white;
  box-sizing: border-box;
}
    /* ─────── カレンダー ─────── */
    #calendar {
      width: 240px;
      border: 1px solid #ccc;
      padding: 4px;
      box-sizing: border-box;
    }
    /* カレンダーのグリッド（7列） */
    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-auto-rows: 16px;
      gap: 2px;
    }
    .cal-cell {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: #ccc; /* 平日デフォルト */
    }
    .cal-cell.weekend {
      background-color: red;
    }
    .cal-cell.today {
      border-radius: 3px;
      background-color: blue;
    }
    /* ─────── キャパブロック ─────── */
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 30px);
      grid-template-rows: repeat(8, 30px);
      gap: 2px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      background: #f4f4f4;
    }
    .cell {
      width: 30px;
      height: 30px;
      border: 1px solid #ddd;
      background-color: white;
      transition: background-color 0.3s ease;
    }
    /* ─────── フッター ─────── */
    .footer {
      font-size: 10px;
      color: #999;
      margin-top: 5px;
    }
  
  #app-container {
    width: 80vw;
    max-width: 400px;
    height: 70vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }

  </style>
</head>

<body>

  <!-- 操作ボタン -->
  <div class="controls">
    <button id="btnColorful">カラフル表示</button>
    <button id="btnMono">モノクロ表示</button>
  </div>

  <!-- メモ欄＋カレンダー -->
  <div class="top-bar">
    <!-- ① メモ欄（スクショ後に手書き想定） -->
    <div id="memo"></div>

    <!-- ② カレンダー（日曜始まり／週ごと段） -->
    <div id="calendar">
      <div class="cal-grid" id="calGrid"></div>
    </div>
  </div>

  <!-- ③ キャパブロックグリッド -->
  <div class="grid" id="grid"></div>

  <!-- ④ フッター：著作権表記 -->
  <div class="footer">© 研究棟1f 2025</div>

<script>
  /* ─────── 共通設定 ─────── */
  const gridWidth = 10, gridHeight = 8;
  const totalCells = gridWidth * gridHeight;
  const fillPercentage = Math.floor(Math.random() * 11) + 75; // 75〜85%
  const fillTarget = Math.floor((fillPercentage / 100) * totalCells);

  /* ブロック配置用配列 */
  const cells = Array(gridHeight).fill(null).map(() => Array(gridWidth).fill(null));
 const colors = [
  "#fdecea", // very light red
  "#fff4e5", // very light orange
  "#fffde7", // very light yellow
  "#f1f8e9", // very light green
  "#e0f7fa", // very light cyan
  "#e3f2fd", // very light blue
  "#ede7f6", // very light purple
  "#fce4ec", // very light pink
];
  let blockId = 1;

  /* ブロックを置く関数（直線 or 四角） */
  function placeBlock(size) {
    for (let attempts=0; attempts<100; attempts++) {
      const isH = Math.random() < 0.5;
      const w = isH ? size : 1;
      const h = isH ? 1 : size;
      const x = Math.floor(Math.random()*(gridWidth-w+1));
      const y = Math.floor(Math.random()*(gridHeight-h+1));
      let can = true;
      for (let dy=0; dy<h; dy++){
        for (let dx=0; dx<w; dx++){
          if (cells[y+dy][x+dx] !== null) { can=false; break; }
        }
        if (!can) break;
      }
      if (can) {
        for (let dy=0; dy<h; dy++){
          for (let dx=0; dx<w; dx++){
            cells[y+dy][x+dx] = blockId;
          }
        }
        blockId++;
        return size;
      }
    }
    return 0;
  }

  // 必要マス数を埋めるまで繰り返し
  let filled = 0;
  while (filled < fillTarget) {
    const size = Math.floor(Math.random()*4)+2; // 2〜5マス
    filled += placeBlock(size);
  }

  // 各セルdivを保持
  const gridElem = document.getElementById('grid');
  const cellDivs = [];
  for (let y=0; y<gridHeight; y++){
    for (let x=0; x<gridWidth; x++){
      const div = document.createElement('div');
      div.className = 'cell';
      div.dataset.blockId = cells[y][x]; 
      gridElem.appendChild(div);
      cellDivs.push(div);
    }
  }

  /* カラフル表示 */
  function showColorful(){
    cellDivs.forEach(div=>{
      const id = parseInt(div.dataset.blockId);
      div.style.backgroundColor = id
        ? colors[id % colors.length]
        : 'white';
    });
  }
  /* モノクロ表示 */
  function showMono(){
    cellDivs.forEach(div=>{
      const id = parseInt(div.dataset.blockId);
      div.style.backgroundColor = id
        ? '#666'
        : 'white';
    });
  }

  // 初期はモノクロ
  showMono();
  document.getElementById('btnColorful').addEventListener('click', showColorful);
  document.getElementById('btnMono').addEventListener('click', showMono);


  /* ─────── カレンダー生成 ─────── */
  function generateCalendar() {
    const calGrid = document.getElementById('calGrid');
    const today = new Date();
    const year = today.getFullYear(), month = today.getMonth();
    // 日曜始まりで週ごとに段が変わる
    const firstDay = new Date(year, month, 1).getDay(); // 0=日曜
    const daysInMonth = new Date(year, month+1, 0).getDate();
    // 祝日判定用リスト（必要に応じて追加）
    const holidays = [
      /* '2025-01-01', '2025-01-13', ... */
    ];
    // 空セル（1日の前まで）
    for (let i=0; i<firstDay; i++){
      const empty = document.createElement('div');
      empty.className = 'cal-cell';
      empty.style.visibility = 'hidden';
      calGrid.appendChild(empty);
    }
    // 各日をドットで追加
    for (let d=1; d<=daysInMonth; d++){
      const date = new Date(year, month, d);
      const cell = document.createElement('div');
      cell.className = 'cal-cell';
      // 土日
      if (date.getDay() === 0 || date.getDay() === 6) {
        cell.classList.add('weekend');
      }
      // 祝日（YYYY-MM-DD 形式で比較）
      const key = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
      if (holidays.includes(key)) {
        cell.classList.add('weekend');
      }
      // 今日
      if (date.toDateString() === today.toDateString()) {
        cell.classList.add('today');
      }
      calGrid.appendChild(cell);
    }
  }
  generateCalendar();

</script>

<!-- 使い方説明ブロック（ページ下部に配置） -->
<footer style="margin-top: 3em; padding: 1em; background-color: #f9f9f9; font-size: 0.95em; border-top: 1px solid #ccc;">
  <button id="help-toggle" style="float: right;">？</button>
  <div id="help-content" style="display: none; clear: both;">
    <h2>使い方について</h2>
    <h3>■ このテンプレートの目的</h3>
    <p>
      このテンプレートは、1日の活動量や作業量を視覚的に把握し、手書きで予定を整理するためのスクリーンショット用テンプレートです。
      時間に縛られず、自由な順序・大きさで予定を組み立てることができるため、
      とくにADHD傾向のある方にも扱いやすい設計を意図しています。
    </p>

    <h3>■ 使用手順</h3>
    <ol>
      <li>画面右上のボタンで「カラフル／モノクロ」表示を切り替える</li>
      <li>気に入った状態でスクリーンショットを撮影する</li>
      <li>iPhoneのメモアプリなどに貼り付け、手書きで予定を書き込む</li>
    </ol>

    <h3>■ ブロック表示について</h3>
    <ul>
      <li>表示されるブロックは、1日の予定量を想定してランダムに生成されます（全体の約75〜85％が埋まるよう調整されています）</li>
      <li>ブロック同士はくっつけて大きな予定を作る／分けて細かくするなど、ユーザーの自由な想像で使い方を調整してください</li>
      <li>モノクロ版では、自分で線や区切りを引き込むことで、細かい調整がしやすくなります</li>
      <li>カラフル版では、すでに区切られた形を使って予定の詰め方を考える練習ができます</li>
    </ul>

    <h3>■ カレンダーについて</h3>
    <ul>
      <li>画面右上には、1か月分の簡易カレンダーが表示されます（日曜日始まり・週ごとの段組み）</li>
      <li>日付はドットで表現され、数字は表示されません。おおよその位置感覚を視覚的に把握できます</li>
      <li>土日祝は赤、当日は青い枠で表示されます</li>
    </ul>

    <h3>■ メモ欄について</h3>
    <p>
      画面左上の白紙部分は、スクリーンショット後に使える自由記入スペースです。書き込む内容はユーザーの自由ですが、以下のような用途に向いています：
    </p>
    <ul>
      <li>買い物メモ</li>
      <li>連絡が必要な人・内容</li>
      <li>覚え書き（忘れたくないひとことなど）</li>
      <li>今日ではないが意識しておきたい締切日（※毎日書き続けることで忘れにくくなります）</li>
      <li>そのほか、タグ・気分・目標など自由に活用してください</li>
    </ul>

    <h3>■ 著作権について</h3>
    <p>
      このテンプレートは個人利用を目的としており、第三者の著作物を無断で模倣・再配布・自作として発信することは禁止されています。
      また、テンプレートのオリジナルデザインは「研究棟1f」に帰属します。
      他者による無断転載・再配布・無断の画像利用などに対して、適切に対処できるよう、著作権の所在を明示しています。
    </p>

    <p style="margin-top: 2em;">
      ご意見・ご要望があれば、お気軽にXまたはnoteにてご連絡ください。
    </p>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggle = document.getElementById('help-toggle');
    const content = document.getElementById('help-content');
    toggle.addEventListener('click', function() {
      content.style.display = (content.style.display === 'none') ? 'block' : 'none';
    });
  });
</script>

</body>
</html>